import{c as L,a as E,r as t,d as N,_ as o,j as r,S as _,b as H}from"./index-5J6CPnOR.js";import{P as w}from"./product-card-BoH9dH1r.js";const Q=()=>{const{data:c,isLoading:u,isError:x,error:p}=L(""),g=E(),[i,j]=t.useState(""),[d,v]=t.useState(""),[n,m]=t.useState(1e4),[l,C]=t.useState(""),[a,h]=t.useState(1),{isLoading:P,data:s,isError:S,error:f}=N({search:i,sort:d,category:l,page:a,price:n}),y=e=>{if(e.stock<1)return o.error("Out of Stock");g(H(e)),o.success("Added to cart")},b=a>1,k=a<4;if(x){const e=p;o.error(e.data.message)}if(S){const e=f;o.error(e.data.message)}return r.jsxs("div",{className:"product-search-page",children:[r.jsxs("aside",{children:[r.jsx("h2",{children:"Filters"}),r.jsxs("div",{children:[r.jsx("h4",{children:"Sort"}),r.jsxs("select",{value:d,onChange:e=>v(e.target.value),children:[r.jsx("option",{value:"",children:"None"}),r.jsx("option",{value:"asc",children:"Price (Low to High)"}),r.jsx("option",{value:"dsc",children:"Price (High to Low)"})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{children:["Max Price: ",n||""]}),r.jsx("input",{type:"range",min:100,max:1e5,value:n,onChange:e=>m(Number(e.target.value))})]}),r.jsxs("div",{children:[r.jsx("h4",{children:"Category"}),r.jsxs("select",{value:l,onChange:e=>C(e.target.value),children:[r.jsx("option",{value:"",children:"ALL"}),!u&&(c==null?void 0:c.categories.map(e=>r.jsx("option",{value:e,children:e.toUpperCase()},e)))]})]})]}),r.jsxs("main",{children:[r.jsx("h1",{children:"Products"}),r.jsx("input",{type:"text",placeholder:"Search by name...",value:i,onChange:e=>j(e.target.value)}),P?r.jsx(_,{length:10}):r.jsx("div",{className:"search-product-list",children:s==null?void 0:s.products.map(e=>r.jsx(w,{productId:e._id,name:e.name,price:e.price,stock:e.stock,handler:y,photo:e.photo},e._id))}),s&&s.totalPage>1&&r.jsxs("article",{children:[r.jsx("button",{disabled:!b,onClick:()=>h(e=>e-1),children:"Prev"}),r.jsxs("span",{children:[a," of ",s.totalPage]}),r.jsx("button",{disabled:!k,onClick:()=>h(e=>e+1),children:"Next"})]})]})]})};export{Q as default};
